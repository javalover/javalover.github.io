<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Java, Android, 移动互联网, 移动开发, 技术分享" />





  <link rel="alternate" href="http://proliang.com/feed" title="PRO.LIANG" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="人一定要靠自己！">
<meta property="og:type" content="website">
<meta property="og:title" content="PRO.LIANG">
<meta property="og:url" content="http://proliang.com/page/2/index.html">
<meta property="og:site_name" content="PRO.LIANG">
<meta property="og:description" content="人一定要靠自己！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PRO.LIANG">
<meta name="twitter:description" content="人一定要靠自己！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://proliang.com/page/2/"/>





  <title> PRO.LIANG </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ad5e52857f2fcc80fc6d4c0621b757e3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">PRO.LIANG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">专注于移动互联网和Android开发</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/editplus-delete-empty-line.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/editplus-delete-empty-line.html" itemprop="url">
                  editplus中删除多余的空行
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-03T22:44:06+08:00">
                2015-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/" itemprop="url" rel="index">
                    <span itemprop="name">杂记</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/编程之外/" itemprop="url" rel="index">
                    <span itemprop="name">编程之外</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/editplus-delete-empty-line.html" class="leancloud_visitors" data-flag-title="editplus中删除多余的空行">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>出于一些需求，今天要把项目中的一些代码拷贝出来一部分放到word文档中，而且还要去除其中的空行！在word中尝试了好一会儿没搞出来，不常用word还是不熟啊。后来想到了editplus这个文本编辑器，因为知道它可以按照正则表达式来查找和替换。</p>
<p>然后就放在editplus中尝试了一下，还果真成功了。记录一下这个正则表达式”^[ \t]*\n”。</p>
<p>下面说下步骤，其实很简单：<br><a href="http://static.proliang.com/2015/03/20150326165252.jpg" target="_blank" rel="external"><img src="http://static.proliang.com/2015/03/20150326165252.jpg" alt="20150326165252"></a></p>
<p>1.要查找替换的文本放到editplus中<br>2.按Ctrl+H呼出文本替换界面<br>3.在要查找的文本框里输入”^[ \t]*\n”<br>4.勾选”Regular expression”，启用正则表达式<br>5.然后点击”替换全部”</p>
<p>这段正则表达式的意思就是，从行首开始匹配后续出现空格或者tab缩进(\t)，出现零次或者多次,然后是换行结束，即表示空行。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/happy-newyear-2015.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/happy-newyear-2015.html" itemprop="url">
                  羊年开工大吉
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-02-28T10:02:30+08:00">
                2015-02-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/" itemprop="url" rel="index">
                    <span itemprop="name">杂记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/happy-newyear-2015.html" class="leancloud_visitors" data-flag-title="羊年开工大吉">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>年后第一天工作～</p>
<p>祝大家新年快乐!开工大吉～～</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/wp-admin-donot-login.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/wp-admin-donot-login.html" itemprop="url">
                  wordpress后台无法打开修复
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-02-08T21:00:32+08:00">
                2015-02-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/" itemprop="url" rel="index">
                    <span itemprop="name">杂记</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/编程之外/" itemprop="url" rel="index">
                    <span itemprop="name">编程之外</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/wp-admin-donot-login.html" class="leancloud_visitors" data-flag-title="wordpress后台无法打开修复">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天突然发现wp后台无法登录了，确切的说应该是无法打开，能显示出登录页面，然后输入正确的帐号密码确定之后，页面一直转圈圈，无响应。过一会儿就提示页面无法打开。</p>
<p><a href="http://static.proliang.com/2015/02/20150208200457.png" target="_blank" rel="external"><img src="http://static.proliang.com/2015/02/20150208200457.png" alt="20150208200457"></a></p>
<p>默认用的是Chrome，接着试了一下其他几个浏览器也都无法打开，看来不是浏览器的原因。cookie也清除了也没用。</p>
<p>网上搜了一下，也没有啥好的解决方案，修改代码什么，感觉不靠谱，因为后台前几天还可以登录的。</p>
<p>然后又想到了，因为阿里云服务器到期，续费之后，昨天手动重启了一下，很可能是这个事件引起的，又从这里查起，去看了ip，还有数据库等等都正常的。</p>
<p>在查看wp-config.php时，无意间看到了一段代码，猜想可能是这个原因</p>
<p><a href="http://static.proliang.com/2015/02/20150208204617.png" target="_blank" rel="external"><img src="http://static.proliang.com/2015/02/20150208204617.png" alt="20150208204617"></a></p>
<p>这个“身份认证密钥与盐”具体的工作原理我也不是很清楚，猜测可能服务器到期然后重新创建了实例，对这块儿认证机制有影响，因此就通过注释里的url去重新生成了一段代码，替换原有的代码，之后再重启了php和nginx，接着重启浏览器访问，发现已经可以正常登录后台了！</p>
<p>出现类似现象的朋友可以尝试一下这个方法！</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/hong-xing-chu-qiang.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/hong-xing-chu-qiang.html" itemprop="url">
                  红杏出墙
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-02-01T17:02:07+08:00">
                2015-02-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程技术/" itemprop="url" rel="index">
                    <span itemprop="name">编程技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/hong-xing-chu-qiang.html" class="leancloud_visitors" data-flag-title="红杏出墙">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>阿里云竟然禁止发布科学上网相关的文章，好吧！！！我只有删除了！<br>2015年11月25日更新！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/xinjing.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/xinjing.html" itemprop="url">
                  般若波罗蜜多心经
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-26T00:00:13+08:00">
                2015-01-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/" itemprop="url" rel="index">
                    <span itemprop="name">杂记</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/浮生若梦/" itemprop="url" rel="index">
                    <span itemprop="name">浮生若梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/xinjing.html" class="leancloud_visitors" data-flag-title="般若波罗蜜多心经">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>曾去灵隐寺，获一善信士赠送一本《金刚般若波罗蜜经》。其后半部有“般若波罗蜜多心经”，念诵之，可静心宁神！现抄录于此，以方便随时随地观看！</p>
<h3 id="般若波罗蜜多心经"><a href="#般若波罗蜜多心经" class="headerlink" title="般若波罗蜜多心经"></a>般若波罗蜜多心经</h3><p>观自在菩萨，行深般若波罗蜜多时，照见五蕴皆空，度一切苦厄。<br>舍利子，色不异空，空不异色，色即是空，空即是色，受想行识，亦复如是。<br>舍利子，是诸法空相，不生不灭，不垢不净，不增不减。</p>
<p>是故空中无色，无受想行识。<br>无眼耳鼻舌身意，无色声香味触法。<br>无眼界，乃至无意识界。<br>无无明，亦无无明尽。<br>乃至无老死，亦无老死尽。<br>无苦集灭道。<br>无智亦无得。<br>以无所得故，菩提萨埵，依般若波罗蜜多故。<br>心无挂碍。<br>无挂碍故，无有恐怖，远离颠倒梦想，究竟涅磐。<br>三世诸佛，依般若波罗蜜多故，得阿耨多罗三藐三菩提。</p>
<p>故知般若波罗蜜多，是大神咒，是大明咒，是无上咒，是无等等咒，能除一切苦，真实不虚。</p>
<p>故说般若波罗蜜多咒。<br>即说咒曰，<br>揭谛揭谛。<br>波罗揭谛。<br>波罗僧揭谛。<br>菩提萨婆诃。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/wordpress-comment-reply-notify.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/wordpress-comment-reply-notify.html" itemprop="url">
                  wordpress增加评论回复邮件通知
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-22T00:41:09+08:00">
                2015-01-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之外/" itemprop="url" rel="index">
                    <span itemprop="name">编程之外</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/wordpress-comment-reply-notify.html" class="leancloud_visitors" data-flag-title="wordpress增加评论回复邮件通知">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>网上搜了一下wordpress评论回复发送邮件通知的插件，基本上都是很久没更新了的，不知道是否还支持新版。也搜到很多无插件实现发送邮件通知，综合了几个最终修改为满足我需的求代码，</p>
<p>1.我有开启评论审核，评论的回复，在被审核通过时，会发送一封邮件给被回复的评论作者<br>2.已有评论资格的人回复某条评论，会直接发送邮件被回复的给评论作者<br>3.管理员后台回复时，会直接发送邮件给评论者</p>
<p>以下是我修改后的代码（下面的代码加在当前主题的functions.php最下面“?&gt;”这一行之前，这段代码前提是要程序先支持发送邮件，不支持的可以使用插件，我这里用的是“WP-Mail-<wbr>SMTP”）：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">//评论回复被审核之后发送邮件通知</div><div class="line">function commit_reply_approved($comment) &#123;</div><div class="line"> $parent_id = $comment-&amp;gt;comment_parent ? $comment-&amp;gt;comment_parent : '';</div><div class="line"> $spam_confirmed = $comment-&amp;gt;comment_approved;</div><div class="line"> if (($parent_id != '') &amp;amp;&amp;amp; ($spam_confirmed == '1')) &#123;</div><div class="line"> $post_link = get_permalink($comment-&amp;gt;comment_post_ID);</div><div class="line"> $wp_email = 'admin@proliang.com';</div><div class="line"> $to = trim(get_comment($parent_id)-&amp;gt;comment_author_email);</div><div class="line"> $author_email=$comment-&amp;gt;comment_author_email;//评论人邮箱</div><div class="line"> $admin_email = get_bloginfo ('admin_email');//管理员邮箱</div><div class="line"> if($to == $admin_email || $to == $author_email) &#123;</div><div class="line"> return;</div><div class="line"> &#125;</div><div class="line"> $subject = '您在 [' . get_option(&amp;quot;blogname&amp;quot;) . '] 发表的评论收到了回复';</div><div class="line"> $message = '</div><div class="line"> &amp;lt;div style=&amp;quot;background-color:#eef2fa; border:1px solid #d8e3e8; color:#111; padding:0 15px; -moz-border-radius:5px; -webkit-border-radius:5px; -khtml-border-radius:5px;&amp;quot;&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;' . trim(get_comment($parent_id)-&amp;gt;comment_author) . ', 您好!&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;您在《&amp;lt;a href=&amp;quot;'.$post_link.'&amp;quot;&amp;gt;'. get_the_title($comment-&amp;gt;comment_post_ID) . '&amp;lt;/a&amp;gt;》发表的评论:&amp;lt;br /&amp;gt;'</div><div class="line"> . trim(get_comment($parent_id)-&amp;gt;comment_content) . '&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;' . trim($comment-&amp;gt;comment_author) . ' 给您的回复:&amp;lt;br /&amp;gt;'</div><div class="line"> . trim($comment-&amp;gt;comment_content) . '&amp;lt;br /&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;您可以点击 &amp;lt;a href=&amp;quot;' . htmlspecialchars(get_comment_link($parent_id,array(&amp;quot;type&amp;quot; =&amp;gt; &amp;quot;all&amp;quot;))) . '&amp;quot;&amp;gt;查看回复的完整內容&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;欢迎再度光临 &amp;lt;a href=&amp;quot;' . get_option('home') . '&amp;quot;&amp;gt;' . get_option('blogname') . '&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;(此邮件由系统自动发送，请勿回复.)&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;/div&amp;gt;';</div><div class="line"> $from = &amp;quot;From: \&amp;quot;&amp;quot; . get_option('blogname') . &amp;quot;\&amp;quot; &amp;lt;$wp_email&amp;gt;&amp;quot;;</div><div class="line"> $headers = &amp;quot;$from\nContent-Type: text/html; charset=&amp;quot; . get_option('blog_charset') . &amp;quot;\n&amp;quot;;</div><div class="line"> wp_mail( $to, $subject, $message, $headers );</div><div class="line"> &#125;</div><div class="line">&#125;</div><div class="line">add_action('comment_unapproved_to_approved', 'commit_reply_approved');</div><div class="line">//评论被有资格的人回复时，直接发送邮件通知</div><div class="line">function commit_reply_notify($comment_id) &#123;</div><div class="line"> $comment = get_comment($comment_id);</div><div class="line"> $parent_id = $comment-&amp;gt;comment_parent ? $comment-&amp;gt;comment_parent : '';</div><div class="line"> $spam_confirmed = $comment-&amp;gt;comment_approved;</div><div class="line"> if (($parent_id != '') &amp;amp;&amp;amp; ($spam_confirmed == '1')) &#123;</div><div class="line"> $post_link = get_permalink($comment-&amp;gt;comment_post_ID);</div><div class="line"> $wp_email = 'admin@proliang.com';</div><div class="line"> $to = trim(get_comment($parent_id)-&amp;gt;comment_author_email);</div><div class="line"> $author_email=$comment-&amp;gt;comment_author_email;//评论人邮箱</div><div class="line"> $admin_email = get_bloginfo ('admin_email');//管理员邮箱</div><div class="line"> if($to == $admin_email || $to == $author_email) &#123;</div><div class="line"> return;</div><div class="line"> &#125;</div><div class="line"> $subject = '您在 [' . get_option(&amp;quot;blogname&amp;quot;) . '] 发表的评论收到了回复';</div><div class="line"> $message = '</div><div class="line"> &amp;lt;div style=&amp;quot;background-color:#eef2fa; border:1px solid #d8e3e8; color:#111; padding:0 15px; -moz-border-radius:5px; -webkit-border-radius:5px; -khtml-border-radius:5px;&amp;quot;&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;' . trim(get_comment($parent_id)-&amp;gt;comment_author) . ', 您好!&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;您在《&amp;lt;a href=&amp;quot;'.$post_link.'&amp;quot;&amp;gt;'. get_the_title($comment-&amp;gt;comment_post_ID) . '&amp;lt;/a&amp;gt;》发表的评论:&amp;lt;br /&amp;gt;'</div><div class="line"> . trim(get_comment($parent_id)-&amp;gt;comment_content) . '&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;' . trim($comment-&amp;gt;comment_author) . ' 给您的回复:&amp;lt;br /&amp;gt;'</div><div class="line"> . trim($comment-&amp;gt;comment_content) . '&amp;lt;br /&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;您可以点击 &amp;lt;a href=&amp;quot;' . htmlspecialchars(get_comment_link($parent_id,array(&amp;quot;type&amp;quot; =&amp;gt; &amp;quot;all&amp;quot;))) . '&amp;quot;&amp;gt;查看回复的完整內容&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;欢迎再度光临 &amp;lt;a href=&amp;quot;' . get_option('home') . '&amp;quot;&amp;gt;' . get_option('blogname') . '&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;p&amp;gt;(此邮件由系统自动发送，请勿回复.)&amp;lt;/p&amp;gt;</div><div class="line"> &amp;lt;/div&amp;gt;';</div><div class="line"> $from = &amp;quot;From: \&amp;quot;&amp;quot; . get_option('blogname') . &amp;quot;\&amp;quot; &amp;lt;$wp_email&amp;gt;&amp;quot;;</div><div class="line"> $headers = &amp;quot;$from\nContent-Type: text/html; charset=&amp;quot; . get_option('blog_charset') . &amp;quot;\n&amp;quot;;</div><div class="line"> wp_mail( $to, $subject, $message, $headers );</div><div class="line"> &#125;</div><div class="line">&#125;</div><div class="line">add_action('comment_post', 'commit_reply_notify');</div></pre></td></tr></table></figure>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>其实感觉还是会者不难，难者不会，虽然写了不少年程序了，php这玩意儿毕竟没有系统的学习过，改这段代码也费了点时间。<br>主要还是在于这2个add_action, “comment_post”是表示评论被保存，此时判断是有资格的，就发送。另外一个”comment_unapproved_to_approved”是表示，评论被批准通过，此时如果该评论如果是回复别人的另外一条评论的，那么就发邮件给被回复的人！</p>
<p>另外其实我的functions.php还有一些其他的修改，也蛮有用，有需要的可以看看<a href="http://proliang.com/functions-edit-log.html" title="functions修改记录">functions.php修改记录</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/do-yourself.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/do-yourself.html" itemprop="url">
                  回过头来，安心做自己
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-15T16:56:14+08:00">
                2015-01-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/浮生若梦/" itemprop="url" rel="index">
                    <span itemprop="name">浮生若梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/do-yourself.html" class="leancloud_visitors" data-flag-title="回过头来，安心做自己">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一味跟他人比，迟早会走向“物化”。</p>
<p>人有时候也很奇怪，会倚靠外在的东西，让自己有信心。</p>
<p>譬如说我小时候，大部分的孩子经济条件不好，营养也不好。但有一个同学长得特别高大、壮硕，他走起路来就虎虎生风，特别有信心。</p>
<p>人类的文明很有趣，慢慢发展下来，你会发现，人可以有各种不同的方式使自己有信心，但前提是要有一个比较成熟。比较丰富的文化支持。譬如说我虽然很矮，可是我在另一方面很高大，可能是在心灵方面，或者精神方面，或者有某一方面特殊技能。我很期盼有这样的一种社会，这样的文化出现，让每一个人有他自己不同的价值。</p>
<p>我们的社会的确已经在走向多元，举例来说，现在有很多地方都要求“无障碍空间”的设计。我小时候哪里有这种东西？残废就残废嘛。可是我们现在也不用这样的称呼了，因为他并没有废。这不只是一个名称的改变，而是人们重新思考，过去所做的判断对不对？过去的残就是废，就是没有用的人，但现在发现他不是，他可能有其他很强的能力可以发展出来。</p>
<p>我想这就是多元社会一个最大的基础，人不是被制化的。</p>
<p>制化，就是用英文分数、数学分数就决定这个学生好或不好。不把人制化，才能让人身上的其他元素有机会被发现，丰富他的自信。</p>
<p>我们的社会是慢慢地往这一个方向在走，但同时有一些干扰，例如重商主义、唯利是图的价值观，又会让多元趋向单一。单一化之后，就会出现这样的声音：“考上大学有什么用，歌手接一个广告就有数百万人口袋，那才实在。”</p>
<p>所以，价值的单一化，是我们所担心的。</p>
<p>一个成熟的社会，应该是每一个角色都有他自已的定位，有他不同的定位过程，每个人都能够满足于他所扮演的角色。这个观念在欧洲一些先进国家已经发展得很成熟，他们长期以来重视生命的价值，所以他们的自信，不是建立在与别人的比较上。</p>
<p>一味地跟别人比，迟早都会走向物化。</p>
<p>“够了”的快乐哲学。</p>
<p>许多人喜欢比较，比身上是不是穿名牌的服装，开的车子是不是BMW，或是捷豹；也有人是比精神方面的，最近上了谁的课，看了哪一本书。听起来是不同的比较，精神的比较好像比物质的比较还高尚。</p>
<p>其实不一定。我认为，有比较之心就是缺乏自信。有自信的人，对于自己所拥有的东西，是一种充满而富足的感觉，他可能看到别人有而自己没有的东西，会觉得羡慕、敬佩，进而欢喜赞叹，但他回过头来还是很安分地做自己。</p>
<p>就像宗教或哲学里所谓的“圆满自足”，无欲无贪，充分地活在快乐的满足中。</p>
<p>这和“禁欲”不一样。好比宗教有成熟的和不成熟的宗教，不成熟的宗教就是在很快、很急促的时间内，要人做到“无欲无贪”，所以提倡禁欲。成熟的宗教反而是让你在欲望里面，了解什么是欲望，然后你会得到释然，觉得自在，就会有新的快乐出来，这叫做圆满自足。</p>
<p>西方的工业革命比我们早，科技发展比我们快，所以他们已经过了那个比较、欲求的阶段，反而回来很安分地做自己。他不会觉得赚的钱少就是不好，或是比别人低贱，也不会一窝蜂地模仿别人，复制别人的经验。在巴黎从来不会同时出现四千多家蛋塔店，这是不可能会发生的事。可是，你会在城市的某一个小角落，闻到一股很特别的香味，是咖啡店主人自己调出来的味道。二十年前，你在那里喝咖啡，二十年后，你还是会在那里喝咖啡，看着店主人慢慢变老，却还是很快乐地在那里调制咖啡。</p>
<p>这里面一定有一种不可替代的满足感吧！</p>
<p>我觉得每一次重回巴黎最大的快乐，就是可以找回这么多人的自信。每一个角落都有一个人的自信，而且安安静静的，不想去惊扰别人似的。</p>
<p>如冰淇淋店的老板，他卖没有牛奶的冰淇淋，几十年来店门前总是大排长龙。但他永远不会想说多开几家分店。他好像有一种“够了”的感觉，那个“够了”是一个很难的哲学：我就是做这件事情，很开心，每一个吃到我冰淇淋的人也都很快乐，所以，够了。</p>
<p>这种快乐是我一直希望学到的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/xue-che-ji-lu.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/xue-che-ji-lu.html" itemprop="url">
                  学车记录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-01-05T22:47:41+08:00">
                2015-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂记/" itemprop="url" rel="index">
                    <span itemprop="name">杂记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/xue-che-ji-lu.html" class="leancloud_visitors" data-flag-title="学车记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2014年底终于决定去考个驾照！在此记录学车过程～</p>
<h3 id="2014-11-05，报名"><a href="#2014-11-05，报名" class="headerlink" title="2014-11-05，报名"></a>2014-11-05，报名</h3><p>万国驾校报名，体检报名一条龙，服务还不错！就是有点远～</p>
<h3 id="2015-01-05，考科目一，练车第一次"><a href="#2015-01-05，考科目一，练车第一次" class="headerlink" title="2015-01-05，考科目一，练车第一次"></a>2015-01-05，考科目一，练车第一次</h3><p>1.科目一考试，100分！<br>2.第一次上车，教练还蛮凶 - -！<br>3.倒车入库练习</p>
<h3 id="2015-01-10，练车第二次"><a href="#2015-01-10，练车第二次" class="headerlink" title="2015-01-10，练车第二次"></a>2015-01-10，练车第二次</h3><p>练习倒车入库，感觉其实没那么难，主要是离合器半连动的感觉要找对！</p>
<h3 id="2015-01-18，练车第三次"><a href="#2015-01-18，练车第三次" class="headerlink" title="2015-01-18，练车第三次"></a>2015-01-18，练车第三次</h3><p>1.周日人真多～上午就练了一小会儿倒车入库<br>2.下午教练用老普桑教了上坡停车和起步、模拟隧道、停车取卡、紧急情况处置还有曲线行驶+直角转弯；感觉还行，没觉得很难，不过还是要多练习。然后用老普桑练了会儿倒库。</p>
<h3 id="2015-01-19，练车第四次"><a href="#2015-01-19，练车第四次" class="headerlink" title="2015-01-19，练车第四次"></a>2015-01-19，练车第四次</h3><p>1.今天4个人，人有点多～ 上午练习上坡起步，每人4车道过一遍，感觉新普桑上坡果真没有老普桑动力大，尤其是起步时。然后又练习了曲线+直角转弯，这2项小心点就不难～<br>2.下午练习了下侧方停车，然后就继续练习倒库，小路就还差一项没练了——窄路掉头，据说很简单，下次试试吧～</p>
<h3 id="2015-01-25，练车第五次"><a href="#2015-01-25，练车第五次" class="headerlink" title="2015-01-25，练车第五次"></a>2015-01-25，练车第五次</h3><p>1.今天模拟考试话费200+，倒库模拟较顺利，分别模拟了7号库，1号库，一共4次，1号库1次微调失误。倒库还需继续加强练习，不过问题不大<br>2.小路模拟，侧方停车基本OK，上坡起步还需抓紧练习，熄火概率较大，较容易溜车，直角还需注意，曲线基本没问题</p>
<h3 id="2015-01-26，练车第六次"><a href="#2015-01-26，练车第六次" class="headerlink" title="2015-01-26，练车第六次"></a>2015-01-26，练车第六次</h3><p>1.上午练习上坡起步共四圈，熄火2次，大概找到了窍门，松刹车时，离合完全不能动<br>2.下午去考试场地步行2圈，踩点<br>3.快结束时，倒桩练了一小会儿，正确率还行，</p>
<h3 id="2015-01-31-练车第七次"><a href="#2015-01-31-练车第七次" class="headerlink" title="2015-01-31,练车第七次"></a>2015-01-31,练车第七次</h3><p>1.上午因班车故障浪费2小时，下午练了上坡，侧方停车，S弯道，直角，倒车。个人认为还需要再多练习，教练认为我练的已经比较好了～～<br>2.下午快结束时，模拟了一次倒桩10号库，两次均合格，感觉倒桩练习还不够，还有提升的空间</p>
<h3 id="2015-03-02-练车第八次"><a href="#2015-03-02-练车第八次" class="headerlink" title="2015-03-02,练车第八次"></a>2015-03-02,练车第八次</h3><p>1.练习倒车，小路等，基本都练习了一遍，一个多月没练了还好没忘记。原本该2月26号考试的，可惜春节过年还没回上海，没法考，算是缺考了，今天交了缺考费，等下次考试了，据说要3周后。听说浦东这边的好几辆班车从15号之后就不开了，也不知道驾校要怎么安排这么多学员，自己过去不大可能，那么远的距离，当初就是因为有班车才在这里学的，唉～不知道这驾校怎么回事，2月模拟考试涨价，现在班车还又出问题，难道是不想再开下去的节奏，不知道这老板是怎么想的～shit～</p>
<h3 id="2015-03-07，练车第九次"><a href="#2015-03-07，练车第九次" class="headerlink" title="2015-03-07，练车第九次"></a>2015-03-07，练车第九次</h3><p>1.今天人很多，基本没怎么连，算是浪费一天时间，个人总觉得上坡起步还要多练练，不懂教练为啥那么糊涂，车不够还叫那么多学员去<br>2.从23号之后，川沙就没有班车了，得走另外路线，真是件郁闷的事情。希望后续学车顺利，考试顺利！</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>未完待续。。</p>
<h3 id="2015-10-16，最后更新"><a href="#2015-10-16，最后更新" class="headerlink" title="2015-10-16，最后更新"></a>2015-10-16，最后更新</h3><p>14号科目三考试通过，15号科目四考试通过，下周驾照会快递过来，历时将近一年！终于拿到驾照~呵呵</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/2014-year-end.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014-year-end.html" itemprop="url">
                  2014年终总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-21T17:24:35+08:00">
                2014-12-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生活感悟/" itemprop="url" rel="index">
                    <span itemprop="name">生活感悟</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生活感悟/编程之外/" itemprop="url" rel="index">
                    <span itemprop="name">编程之外</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2014-year-end.html" class="leancloud_visitors" data-flag-title="2014年终总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2014即将过去，这一年收获很多，学到了很多东西。也有很多遗憾！</p>
<p>从去年加入到目前的这个团队，到现在已经一年有余。工作很忙，是的，一直以来都很忙，加班几乎是每天都有。到也是因为老婆孩子今年没在身边，所以能有点时间去加班吧。虽然忙，但是总算还有收获，公司业绩不错，产品的用户数量涨了很多。因此得以有机会去新加坡旅游了一次，这还是长这么大的第一次出国 - -！也因为公司业绩不错的原因，老板给大家涨了工资。12月去北京开了发布会，明年要做的事情，现在也已经有了方向。希望明年会更好。<br>只是遗憾的事，原本计划的新版没有做好，大家信心满满的重构过代码的版本，最后就这样放弃了。</p>
<p>春节回家的票依然是如往年一样很难买到。虽然今年可以提前60天买票，今天已经可以买除夕的火车票了，但是我还没有票。这是老家。<br>孩子1岁多了，会叫爸爸了，我却没抱过几次，只能在一些节假日的时候回去看看他。孩子她妈在老家带孩子很辛苦，但是没办法，这大大的城市里，还没有一个属于我们自己的家。</p>
<p>太极拳是一个好东西，这是今年最好的收获之一。同事是真正的太极传人，师承一位太极名家，感谢他愿意把这个无私的传授给大家。随未拜师，我们还是称他为“师父”。我们学到的是陈发科传李经梧的陈氏太极拳，一路、二路，每天中午时用一小时时间练习1，2遍。虽然不会身轻如燕，飞檐走壁什么的，但是可以达到练习之后神清气爽，感觉整个人都精神了。我觉得这两路拳，值得坚持一生去习练。</p>
<p>或许是因为坚持练习太极拳的缘故。今年的年终体检一切都正常，就有一项是：“心动过缓”，医生给的提示是，“心动过缓有2种情况，一种是身体健康的运动员，一种就是有一些疾病”，明显我这是第一种。想我这每天做电脑前面写代码的人，出现这种情况，我也只能认为是坚持练习太极拳的缘故吧。<br>还有就是偏瘦了，这个一直以来就这样，怎么吃也不长，也就不多说了，说多了怕被胖子们揍- -！<br>前几年的胃病也因为去年治好了，今年未再犯过。提醒有胃病的朋友们，有胃病早治疗，有一个叫“幽门螺旋杆菌”的东西，是以前胃病不能根治的原因，现在还是比较容易治的。</p>
<p>今年算是出去旅游次数最多的一年，也是走的最远的。去了2次灵隐寺，去了新加坡（这个算是最远的），去了北京（第一次去京城）。其实还有一次未参加的～</p>
<p>2014，再见！<br>2015，希望我们的App用户数越来越多，希望计划能够实现。希望家人平安健康。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://proliang.com/zixing-indexoutofbounds-bugfix.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PRO.LIANG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/zixing-indexoutofbounds-bugfix.html" itemprop="url">
                  二维码扫描zxing异常ArrayIndexOutOfBoundsException解决
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-03T20:49:18+08:00">
                2014-12-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/zixing-indexoutofbounds-bugfix.html" class="leancloud_visitors" data-flag-title="二维码扫描zxing异常ArrayIndexOutOfBoundsException解决">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>二维码扫描zxing在某一些设备上会出现ArrayIndexOutOfBoundsException异常，异常信息类似：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java.lang.ArrayIndexOutOfBoundsException: length=629856; index=921599</div></pre></td></tr></table></figure>
<p>或着</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">java.lang.ArrayIndexOutOfBoundsException: src.length=629856 srcPos=630000 dst.length=360000 dstPos=286400 length=800</div><div class="line">	at java.lang.System.arraycopy(Native Method)</div><div class="line">	at com.google.zxing.PlanarYUVLuminanceSource.getMatrix(PlanarYUVLuminanceSource.java:102)</div><div class="line">	at com.google.zxing.common.HybridBinarizer.getBlackMatrix(HybridBinarizer.java:70)</div><div class="line">	at com.google.zxing.BinaryBitmap.getBlackMatrix(BinaryBitmap.java:85)</div><div class="line">	at com.google.zxing.qrcode.QRCodeReader.decode(QRCodeReader.java:77)</div><div class="line">	at com.google.zxing.MultiFormatReader.decodeInternal(MultiFormatReader.java:171)</div><div class="line">	at com.google.zxing.MultiFormatReader.decodeWithState(MultiFormatReader.java:85)</div><div class="line">	at com.google.zxing.client.android.DecodeHandler.decode(DecodeHandler.java:82)</div><div class="line">	at com.google.zxing.client.android.DecodeHandler.handleMessage(DecodeHandler.java:58)</div><div class="line">	at android.os.Handler.dispatchMessage(Handler.java:99)</div><div class="line">	at android.os.Looper.loop(Looper.java:137)</div><div class="line">	at com.google.zxing.client.android.DecodeThread.run(DecodeThread.java:110)</div></pre></td></tr></table></figure>
<p>版本不同，异常信息或许有一些差别。</p>
<p>在我这里出现异常的手机是一部android4.2的，屏幕是960×540</p>
<p>通过比较不同的设备，从zxing的log中发现了一些不同之处，下面这段是这部出现异常的手机的log</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">I/com.google.zxing.client.android.camera.open.OpenCameraInterface(4212): Opening camera #0</div><div class="line">I/CameraConfiguration(4212): Screen resolution: Point(960, 540)</div><div class="line">I/CameraConfiguration(4212): Supported preview sizes: 1280x720 848x480 720x480 640x480 352x288 320x240 176x144</div><div class="line">I/CameraConfiguration(4212): Using largest suitable preview size: Point(1280, 720)</div><div class="line">I/CameraConfiguration(4212): Camera resolution: Point(1280, 720)</div></pre></td></tr></table></figure>
<p>zxing设置照相机的分辨率是根据屏幕的大小(Screen resolution)在照相机支持的sizes中找到的，<br>从上面这段log中看出来手机屏幕只有960×540却最终使用了 1280×720的分辨率，所以在取景的时候出现了ArrayIndexOutOfBoundsException<br>在其他正常运行的设备中看这段log基本都是Camera resolution比Screen resolution小一些,例如下面这一段<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">I/GingerbreadOpenCamera(7328): Opening camera #0</div><div class="line">I/CameraConfiguration(7328): Screen resolution: Point(768, 1184)</div><div class="line">I/CameraConfiguration(7328): Supported preview sizes: 1280x960 1280x720 800x480 720x480 640x480 576x432 480x320 384x288 352x288 320x240 240x160 176x144 </div><div class="line">I/CameraConfiguration(7328): Found best approximate preview size: Point(720, 480)</div><div class="line">I/CameraConfiguration(7328): Camera resolution: Point(720, 480)</div><div class="line">I/CameraConfiguration(7328): Initial camera parameters: ae-bracket-hdr=</div></pre></td></tr></table></figure></p>
<p>因此我们需要修改程序让他滤过这个比screen resolution大的sizes</p>
<p>最终在类CameraConfigurationManager中发现了findBestPreviewSizeValue是用来找这个sizes的方法，那么我们就是要修改这个方法了。<br>今天发现zxing有一些版本中这个方法不再CameraConfigurationManager中，而是在CameraConfigurationUtils这个类中</p>
<p>有一段代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (maybeFlippedWidth == screenResolution.x &amp;amp;&amp;amp; maybeFlippedHeight == screenResolution.y) &#123;</div><div class="line">  Point exactPoint = <span class="keyword">new</span> Point(realWidth, realHeight);</div><div class="line">  Log.i(TAG, &amp;quot;Found preview size exactly matching screen size: &amp;quot; + exactPoint);</div><div class="line">  <span class="keyword">return</span> exactPoint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这一段是找到了一个最合适的size，就是 support size 等于 screen size。我们要改的代码在这段代码附近</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">float</span> aspectRatio = (<span class="keyword">float</span>) maybeFlippedWidth/ (<span class="keyword">float</span>) maybeFlippedHeight;</div><div class="line"><span class="keyword">float</span> newDiff = Math.abs(aspectRatio - screenAspectRatio);</div><div class="line"><span class="keyword">if</span> (newDiff &amp;lt; diff) &#123;</div><div class="line">	bestSize = <span class="keyword">new</span> Point(realWidth, realHeight);</div><div class="line">	diff = newDiff;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们给他加一个条件过滤掉比 screen 大的size</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">float</span> aspectRatio = (<span class="keyword">float</span>) maybeFlippedWidth/ (<span class="keyword">float</span>) maybeFlippedHeight;</div><div class="line"><span class="keyword">float</span> newDiff = Math.abs(aspectRatio - screenAspectRatio);</div><div class="line"><span class="comment">//保证宽高小于屏幕的宽高</span></div><div class="line"><span class="keyword">boolean</span> isSmaller = maybeFlippedWidth&amp;lt;screenResolution.y &amp;amp;&amp;amp; maybeFlippedHeight &amp;lt;screenResolution.x;</div><div class="line"><span class="keyword">if</span> (newDiff &amp;lt; diff &amp;amp;&amp;amp; isSmaller) &#123;</div><div class="line">	bestSize = <span class="keyword">new</span> Point(realWidth, realHeight);</div><div class="line">	diff = newDiff;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>今天看了下最新版zxing的代码，算法有变动已经没有上面的这一段代码了，但是依然还是有这个异常出现。因此还是要过滤</p>
<p>在exactPoint查找的后面，在while循环的末尾加一段代码过滤掉比screen大的size</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(maybeFlippedWidth &amp;gt; screenResolution.x &amp;amp;&amp;amp; maybeFlippedHeight &amp;gt; screenResolution.y) &#123;</div><div class="line">    it.remove();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>我这里的扫描二维码用的是竖屏的，上面所说的新版zxing代码改动的是在横屏的基础上修改的<br>其他人如果也遇到这个问题，在修改时，需要留意屏幕的方向，代码不一定跟这个是一样的<br>不知道这种把大于screen的size过滤掉的方法是不是最好的，但是这样改之后，程序是可以正常运行了，其他手机上也正常，如果谁有更好的解决方案，请留言告诉我～谢谢！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Liang" />
          <p class="site-author-name" itemprop="name">Liang</p>
           
              <p class="site-description motion-element" itemprop="description">人一定要靠自己！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">49</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">62</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="http://proliang.com/feed" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "0ae56d4315d44c68907a4e1d381b7ed9",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  







  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("iV7QoJid7bitJfuE1e4Rmhih-gzGzoHsz", "rHionfAngav976m39LhnK54b");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


  

</body>
</html>
